# go-mongo-server
a http server operate the mongodb write by golang
<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>API文档</title><style type="text/css">table{border:1px solid #dbdbdb}th{background:-webkit-gradient(linear,0 0,0 100%,from(#616161),to(#555))}th b{color:#fff}</style></head><body><h1>http请求目录</h1><table class="t2"><tbody><tr><th width="110"><b>方法</b></th><th width="200"><b>地址</b></th><th width="60"><b>操作</b></th><th width="300"><b>post body示例</b></th><th width="180"><b>备注</b></th></tr><tr><td><b>帮助</b></td><td>http://222.185.195.206:8010/</td><td>GET</td><td></td><td></td></tr><tr><td><b>查询</b></td><td>http://222.185.195.206:8010/get</td><td>POST</td><td>{"Url":"","DBName":"spider","Business":"insocial","Data":{"zans":{"$gt":1}},"Limit":1,"Skip":1,"Select":{"id":1,"inid":1,"name":1}}</td><td></td></tr><tr><td><b>统计</b></td><td>http://222.185.195.206:8010/count</td><td>POST</td><td>{"Url":"","Business":"insocial","Data":{"zans":{"$gt":1}}</td><td></td></tr><tr><td><b>判断是否存在</b></td><td>http://222.185.195.206:8010/exists</td><td>POST</td><td>{"Business":"insocial","Data":{"id":"123456"},"Key":"id"}</td><td>需指定主键key，否则默认为key为id</td></tr><tr><td><b>新增</b></td><td>http://222.185.195.206:8010/add</td><td>POST</td><td>{"Business":"insocial","Data":{"id":"123456","name":"123123"},"Key":"id"}</td><td>Data值可以为map或者[]map</td></tr><tr><td><b>更新</b></td><td>http://222.185.195.206:8010/update</td><td>POST</td><td>{"Business":"insocial","Data":{"id":"123456","name":"123123"},"Key":"id"}</td><td>需指定主键key，否则默认为key为id</td></tr></tbody></table><h1>http post 参数详情</h1><table class="t2"><tbody><tr><th width="110"><b>参数</b></th><th width="195"><b>名称</b></th><th width="195"><b>备注</b></th><th width="195"><b>必选</b></th></tr><tr><td><b>Url</b></td><td>服务器IP</td><td>缺省为空，则为Server所在服务器，或者192.168.2.192:27027指定mongodb连接字符串</td><td><img src="http://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/FusionAPI_2.JPG"></td></tr><tr><td><b>DBName</b></td><td>数据库名称</td><td>缺省为spider</td><td><img src="http://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/FusionAPI_2.JPG"></td></tr><tr><td><b>Business</b></td><td>表名</td><td></td><td><img src="http://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/API_legend_6.png"></td></tr><tr><td><b>Data</b></td><td>数据</td><td>查询条件或者插入和更新的值</td><td><img src="http://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/API_legend_6.png"></td></tr><tr><td><b>OrderBy</b></td><td>排序条件</td><td>time,+time,-time</td><td><img src="http://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/FusionAPI_2.JPG"></td></tr><tr><td><b>Limit</b></td><td>选取条数</td><td>int型</td><td><img src="http://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/FusionAPI_2.JPG"></td></tr><tr><td><b>Skip</b></td><td>忽略条数</td><td>int型</td><td><img src="http://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/FusionAPI_2.JPG"></td></tr><tr><td><b>Select</b></td><td>指定返回列</td><td>{"time":1}</td><td><img src="http://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/FusionAPI_2.JPG"></td></tr><tr><td><b>Key</b></td><td>表主键</td><td>缺省为id,在做插入或者更新的时候需要指定</td><td><img src="http://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/FusionAPI_2.JPG"></td></tr><tr><td><b>Update</b></td><td>更新标识</td><td>bool类型，插入时如果已存在是否更新</td><td><img src="http://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/FusionAPI_2.JPG"></td></tr><tr><td><b>Distinct</b></td><td>去重查询标识</td><td>string类型，根据string执行去重查询</td><td><img src="http://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/FusionAPI_2.JPG"></td></tr><tr><td><b>LockKey</b></td><td>占用的键</td><td>用于并发获取数据，获取数据时先标识为-1,需同时指定key</td><td><img src="http://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/FusionAPI_2.JPG"></td></tr></tbody></table></body></html>
